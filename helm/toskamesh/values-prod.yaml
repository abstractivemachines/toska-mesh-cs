# Production values for toskamesh

# Global configuration
environment: Production

# Secret management (use managed secrets in production)
secrets:
  meshServiceAuth:
    existingSecret: ""     # e.g., mesh-auth-secret from vault/external-secrets
    key: mesh_service_auth_secret
  defaultConnection:
    existingSecret: ""     # e.g., app-db-conn from cloud secret manager
    key: db_connection_string
  gatewayJwt:
    existingSecret: ""     # e.g., gateway-jwt-secret from cloud secret manager
    key: jwt_secret_key

networkPolicy:
  enabled: true

# Service mesh integration (optional)
mesh:
  enabled: true
  annotations:
    sidecar.istio.io/inject: "true"
    traffic.sidecar.istio.io/includeInboundPorts: "*"
    security.istio.io/tlsMode: "istio"

# Global secrets (MUST be changed in production!)
global:
  meshServiceAuthSecret: "CHANGE-ME-IN-PRODUCTION-USE-STRONG-SECRET"

# External services configuration (use managed cloud services in production)
externalServices:
  consul:
    address: "https://consul.production.example.com:8500"
  postgres:
    host: "postgres.production.example.com"
    port: 5432
    database: "toskamesh_prod"
    username: "toskamesh_prod"
    password: "CHANGE-ME-USE-SECRETS-MANAGER"
  rabbitmq:
    host: "rabbitmq.production.example.com"
    port: 5672
    username: "toskamesh"
    password: "CHANGE-ME-USE-SECRETS-MANAGER"
  redis:
    host: "redis.production.example.com"
    port: 6379

# Gateway configuration
gateway:
  enabled: true
  replicaCount: 3
  image:
    repository: your-registry.example.com/toskamesh-gateway
    tag: "1.0.0"
    pullPolicy: Always
  service:
    type: LoadBalancer
    port: 443
  ingress:
    enabled: true
    className: ""
    hosts:
      - host: "gateway.example.com"
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: toskamesh-gateway-tls
        hosts:
          - "gateway.example.com"
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  secrets:
    jwtSecretKey: "CHANGE-ME-USE-STRONG-JWT-SECRET-MIN-64-CHARS"
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 6
    targetCPUUtilizationPercentage: 65
    targetMemoryUtilizationPercentage: 75

# Discovery service configuration
discovery:
  enabled: true
  replicaCount: 3
  image:
    repository: your-registry.example.com/toskamesh-discovery
    tag: "1.0.0"
    pullPolicy: Always
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 6
    targetCPUUtilizationPercentage: 65
    targetMemoryUtilizationPercentage: 75

# Auth service configuration
authService:
  enabled: true
  replicaCount: 3
  image:
    repository: your-registry.example.com/toskamesh-auth-service
    tag: "1.0.0"
    pullPolicy: Always
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 65
    targetMemoryUtilizationPercentage: 75

# Config service configuration
configService:
  enabled: true
  replicaCount: 3
  image:
    repository: your-registry.example.com/toskamesh-config-service
    tag: "1.0.0"
    pullPolicy: Always
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 65
    targetMemoryUtilizationPercentage: 75

# Metrics service configuration
metricsService:
  enabled: true
  replicaCount: 3
  image:
    repository: your-registry.example.com/toskamesh-metrics-service
    tag: "1.0.0"
    pullPolicy: Always
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 65
    targetMemoryUtilizationPercentage: 75

# Tracing service configuration
tracingService:
  enabled: true
  replicaCount: 3
  image:
    repository: your-registry.example.com/toskamesh-tracing-service
    tag: "1.0.0"
    pullPolicy: Always
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 65
    targetMemoryUtilizationPercentage: 75

# Core (Orleans) configuration
core:
  enabled: true
  replicaCount: 3
  image:
    repository: your-registry.example.com/toskamesh-core
    tag: "1.0.0"
    pullPolicy: Always
  orleans:
    serviceName: "ToskaMesh"
    clusterId: "prod"
  resources:
    requests:
      cpu: 1000m
      memory: 1Gi
    limits:
      cpu: 4000m
      memory: 4Gi
  hpa:
    enabled: true
    minReplicas: 3
    maxReplicas: 7
    targetCPUUtilizationPercentage: 60
    targetMemoryUtilizationPercentage: 70

# Health Monitor configuration
healthMonitor:
  enabled: true
  replicaCount: 2
  image:
    repository: your-registry.example.com/toskamesh-health-monitor
    tag: "1.0.0"
    pullPolicy: Always
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 512Mi
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 4
    targetCPUUtilizationPercentage: 65
    targetMemoryUtilizationPercentage: 75
