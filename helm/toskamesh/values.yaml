# Default values for toskamesh (Development environment)

# Global configuration
environment: Development
nameOverride: ""
fullnameOverride: ""

# Secret management (override with existing Kubernetes secrets in real envs)
secrets:
  meshServiceAuth:
    existingSecret: ""     # If set, use this secret for Mesh__ServiceAuth__Secret
    key: mesh_service_auth_secret
  defaultConnection:
    existingSecret: ""     # If set, use this secret/key for DB connection strings
    key: db_connection_string
  gatewayJwt:
    existingSecret: ""     # If set, use this secret/key for gateway JWT signing key
    key: jwt_secret_key

networkPolicy:
  enabled: false

# Service mesh integration (optional)
mesh:
  enabled: false
  annotations:
    sidecar.istio.io/inject: "true"
    traffic.sidecar.istio.io/includeInboundPorts: "*"
    security.istio.io/tlsMode: "istio"

# Global secrets
global:
  meshServiceAuthSecret: "super-secret-mesh-key-change-me"

# External services configuration
externalServices:
  consul:
    address: "http://consul:8500"
  postgres:
    host: "postgres"
    port: 5432
    database: "toksa_mesh"
    username: "toksa_mesh"
    password: "toksa_mesh_password"
  rabbitmq:
    host: "rabbitmq"
    port: 5672
    username: "guest"
    password: "guest"
  redis:
    host: "redis"
    port: 6379

# Gateway configuration
gateway:
  enabled: true
  replicaCount: 1
  image:
    repository: toskamesh-gateway
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: LoadBalancer
    port: 80
  ingress:
    enabled: false
    className: ""
    hosts:
      - host: "toskamesh.local"
        paths:
          - path: /
            pathType: Prefix
    tls: []
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  secrets:
    jwtSecretKey: "your-secret-key-min-32-chars-long-change-in-production"
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Discovery service configuration
discovery:
  enabled: true
  replicaCount: 1
  image:
    repository: toskamesh-discovery
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Auth service configuration
authService:
  enabled: true
  replicaCount: 1
  image:
    repository: toskamesh-auth-service
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Config service configuration
configService:
  enabled: true
  replicaCount: 1
  image:
    repository: toskamesh-config-service
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Metrics service configuration
metricsService:
  enabled: true
  replicaCount: 1
  image:
    repository: toskamesh-metrics-service
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Tracing service configuration
tracingService:
  enabled: true
  replicaCount: 1
  image:
    repository: toskamesh-tracing-service
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Core (Orleans) configuration
core:
  enabled: true
  replicaCount: 1
  image:
    repository: toskamesh-core
    tag: latest
    pullPolicy: IfNotPresent
  orleans:
    serviceName: "ToskaMesh"
    clusterId: "dev"
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Health Monitor configuration
healthMonitor:
  enabled: true
  replicaCount: 1
  image:
    repository: toskamesh-health-monitor
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 2
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Service Account
serviceAccount:
  create: true
  annotations: {}
  name: ""
